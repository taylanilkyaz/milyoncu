/*! jQuery UI Virtual Keyboard Navigation v1.6.2 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";e.keyboard=e.keyboard||{},e.keyboard.navigationKeys={toggle:112,enter:13,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,caretrt:45,caretlt:46,caretright:function(t){e.keyboard.keyaction.right(t)},caretleft:function(t){e.keyboard.keyaction.left(t)}},e.fn.addNavigation=function(t){return this.each(function(){var a,n,o=e(this).data("keyboard"),i=o.options,s={position:[0,0],toggleMode:!1,focusClass:"hasFocus",toggleKey:null},r=e.keyboard.events;o&&(o.navigation_options=a=e.extend({},s,t),o.navigation_keys=n=e.extend({},e.keyboard.navigationKeys),o.navigation_namespace=o.namespace+"Nav",o.extensionNamespace.push(o.navigation_namespace),o.saveNav=[o.options.tabNavigation,o.options.enterNavigation],o.allNavKeys=e.map(n,function(e,t){return e}),o.navigation_init=function(){var t=e.keyboard.css;o.$keyboard.toggleClass(a.focusClass,a.toggleMode).find("."+t.keySet+":visible").find("."+t.keyButton+'[data-pos="'+a.position[0]+","+a.position[1]+'"]').addClass(i.css.buttonHover),o.$preview.unbind(o.navigation_namespace).bind("keydown"+o.navigation_namespace,function(e){return o.checkKeys(e.which)})},o.checkKeys=function(t,n){if(void 0!==t){var i=o.navigation_keys,s=e.keyboard.css;return(t===(a.toggleKey||i.toggle)||n)&&(a.toggleMode=!n&&!a.toggleMode,o.options.tabNavigation=!a.toggleMode&&o.saveNav[0],o.options.enterNavigation=!a.toggleMode&&o.saveNav[1]),o.$keyboard.toggleClass(a.focusClass,a.toggleMode),a.toggleMode&&t===i.enter?(o.$keyboard.find("."+s.keySet+":visible").find("."+s.keyButton+'[data-pos="'+a.position[0]+","+a.position[1]+'"]').trigger(r.kbRepeater),!1):a.toggleMode&&e.inArray(t,o.allNavKeys)>=0?(o.navigateKeys(t),!1):void 0}},o.navigateKeys=function(t,n,s){if(o.isVisible()){s="number"==typeof s?s:a.position[1],n="number"==typeof n?n:a.position[0];var r=e.keyboard.css,d=o.$keyboard.find("."+r.keySet+":visible"),c=d.find("."+r.endRow).length-1,g=d.find("."+r.keyButton+'[data-pos^="'+n+',"]').length-1,y=o.last,b=o.$preview.val().length,v=o.navigation_keys;switch(t){case v.pageup:n=0;break;case v.pagedown:n=c;break;case v.end:s=g;break;case v.home:s=0;break;case v.left:s+=s>0?-1:0;break;case v.up:n+=n>0?-1:0;break;case v.right:s+=1;break;case v.down:n+=n+1>c?0:1;break;case v.caretrt:y.start++;break;case v.caretlt:y.start--}t!==v.caretrt&&t!==v.caretlt||(y.start=y.start<0?0:y.start>b?b:y.start,o.last.start=o.last.end=y.end=y.start,e.keyboard.caret(o.$preview,o.last)),s>(g=d.find("."+r.keyButton+'[data-pos^="'+n+',"]').length-1)&&(s=g),d.find("."+i.css.buttonHover).removeClass(i.css.buttonHover),d.find("."+r.keyButton+'[data-pos="'+n+","+s+'"]').addClass(i.css.buttonHover),a.position=[n,s]}},o.options.alwaysOpen&&o.isVisible()&&(o.$keyboard.find("."+i.css.buttonHover).removeClass(i.css.buttonHover),o.navigation_init()),o.$el.unbind(o.navigation_namespace).bind(r.kbVisible,function(){o.$keyboard.find("."+i.css.buttonHover).removeClass(i.css.buttonHover),o.navigation_init()}).bind(r.kbInactive+" "+r.kbHidden,function(e){o.checkKeys(e.which,!0)}).bind(r.kbKeysetChange,function(){o.navigateKeys(null)}).bind("navigate navigateTo",function(t,a,n){var i;(a=isNaN(a)?a.toLowerCase():a)in o.navigation_keys?(i=o.navigation_keys[a],isNaN(i)&&i in e.keyboard.keyaction?e.keyboard.keyaction[i](o,this,t):e.isFunction(i)?i(o):o.checkKeys(i)):"string"==typeof a&&a in e.keyboard.keyaction?e.keyboard.keyaction[a](o,this,t):o.navigateKeys(null,a,n)}))})}});